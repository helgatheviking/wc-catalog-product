/*! WC Catalog Product 0.1.0 2017-03-03 13:28 */
!function(a){a(".show_if_simple:not(.hide_if_catalog)").addClass("show_if_catalog"),a("body").on("woocommerce-product-type-change",function(b,c,d){"catalog"===c&&(a(".show_if_external").hide(),a(".show_if_catalog").show(),a("input#_manage_stock").change())}),a("select#product-type").change();var b;a(".add_pdf_cover").on("click",function(c){var d=a(this),e=d.prev("input"),f=d.closest(".pdf_cover_container").find("table.pdf_catalog");return c.preventDefault(),b?void b.open():(b=wp.media.frames.file_frame=wp.media({title:wc_catalog_product_metabox.cover_uploader_title,button:{text:wc_catalog_product_metabox.cover_uploader_button_text},library:{type:"application/pdf"},multiple:!1}),b.on("select",function(){var a=b.state().get("selection");a.map(function(a){if(a=a.toJSON(),a.id){var b=wc_catalog_product_metabox.document_icon;f.empty().append('<tr class="pdf-row" data-attachment_id="'+a.id+'"><td><img src="'+b+'" /></td><td>'+a.title+'</td><td><a href="#" class="delete-pdf" title="'+d.data("delete")+'">'+d.data("text")+"</a></td></tr>"),e.val(a.id)}})}),void b.open())}),a(".pdf_cover_container").on("click","a.delete-pdf",function(){return $button=a(this),$input=$button.closest("table").next("input"),$button.closest("tr").remove(),$input.val(0),!1});var c;a(".add_pdf").on("click",function(b){var d=a(this),e=d.prev("input"),f=d.closest(".pdf_catalog_container").find(".pdf_catalog");return b.preventDefault(),c?void c.open():(c=wp.media.frames.pdf_gallery_frame=wp.media({title:wc_catalog_product_metabox.pdfs_uploader_title,button:{text:wc_catalog_product_metabox.pdfs_uploader_button_text},library:{type:"application/pdf"},multiple:!0}),c.on("select",function(){var a=c.state().get("selection"),b=e.val();a.map(function(a){if(a=a.toJSON(),a.id){b=b?b+","+a.id:a.id;var c=wc_catalog_product_metabox.document_icon;f.append('<tr class="pdf-row ui-sortable-handle" data-attachment_id="'+a.id+'"><td><img src="'+c+'" /></td><td>'+a.title+'</td><td><a href="#" class="delete-pdf" title="'+wc_catalog_product_metabox.delete_string+'">'+wc_catalog_product_metabox.delete_string+"</a></td></tr>")}}),e.val(b)}),void c.open())}),a(".pdf_catalog_sortable").sortable({items:".pdf-row",cursor:"move",scrollSensitivity:40,forcePlaceholderSize:!0,forceHelperSize:!1,helper:"clone",opacity:.65,placeholder:"pdf-metabox-sortable-placeholder",start:function(a,b){b.item.css("background-color","#f6f6f6")},stop:function(a,b){b.item.removeAttr("style")},update:function(a,b){var c="";$table=b.item.closest("table"),$table.find("tr").css("cursor","default").each(function(){var a=jQuery(this).attr("data-attachment_id");c=c+a+","}),$table.next("input").val(c)}}),a(".pdf_catalog_container").on("click","a.delete-pdf",function(){$button=a(this),$input=$button.closest("table").next("input"),$button.closest("tr.pdf").remove();var b="";return a(".pdf_catalog_container").find(".pdf_catalog tr.pdf").css("cursor","default").each(function(){var a=jQuery(this).attr("data-attachment_id");b=b+a+","}),$input.val(b),!1})}(jQuery);